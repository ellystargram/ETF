import ETF.Sentence
import ETF.SentenceTestUnit

fun main() {
    println("ET is booting")
    val englishTester = ET()

    val SentenceTestUnit = SentenceTestUnit()
    SentenceTestUnit.testName = "Sentence Test Unit 2"
    SentenceTestUnit.sentences.add(
        Sentence(
            "어렸을 때, 가족과 장거리 자동차 여행을 가는 것보다 내가 더 좋아했던 것은 없었다.",
            "When I was a child, there was nothing that I loved more than going on long car journeys with my family."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "내 자전거는 내가 걷는 것보다 더 빨리 움직이고, 더 먼 거리를 이동할 수 있게 해준다.",
            "My bike helps me move faster and cover longer distances than I would on foot."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "자전거는 나의 가장 선호되는 이동 수단이 되었다.",
            "The bicycle has taken over as my most preferred mode of transportation."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "게다가, 자전거를 이용하면, 대중교통의 제한적인 노선과 일정뿐만 아니라 교통 체증으로부터 자유로워 질 수 있다.",
            "In addition, if I use my bike, I can be free from traffic jams as well as public transit's restrictive routes and schedules."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "아름다운 강변의 자전거 길이나 관심을 끄는 매력적인 동네를 만나면, 그 기회를 잡는다.",
            "If I come upon a beautiful riverside bike path or a charming neighborhood that intrigues me, I seize the opportunity."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "처음 방문했을 때 모든 것을 보지 못한다 하더라도, 나중에 언제나 자전거를 타고 돌아올 수 있다.",
            "Even if I end up not being able to see everything during my first visit, I can always return on my bike later."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "고요하고 달빛이 비쳐지는 밤에 수백만 개의 눈송이가 떨어지는 광경보다 더 아름다운 것은 없습니다.",
            "There is nothing more beautiful than the sight of millions of snowflakes falling on a still and moonlit night."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "자전거는 대도시 지역을 체험하는 독립적이고도 자유로운 방식을 제공한다.",
            "A bicycle provides an independent and liberating way of experiencing metropolitan areas."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "버스를 찾거나 오래 걸을 걱정 없이 나는 사람들의 발길이 닿지 않는 곳에 갈 수 있고 그 지역의 곳곳을 탐험할 수 있다.",
            "I can go off the beaten path and explore every corner of the area without worrying about finding a bus or making a long trek on foot."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "자전거 타기는 걷는 것, 혹은 자동차를 운전하는 것으로는 불가능한 방식으로 도시를 즐기는 자유를 당신에게 줄 수 있다.",
            "Cycling can give you the freedom to enjoy cities in ways that are impossible by walking, or driving a car."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "당신의 자전거가 여행을 최대한으로 활용할 수 있게 해주는 열쇠가 될 수 있다.",
            "Your bicycle can become the key to getting the most out of your travels."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "최고의 제품을 찾는 방법은 이 모든 정보를 고려하는 것입니다.",
            "The way to find the best product is to take all of this information into account."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "우리 모두는 그의 친절한 행동과 그가 그 일을 수행하는 유쾌한 방식 때문에 그를 존경 했습니다.",
            "We all respected him for his act of kindness and for the pleasant way in which he had performed it."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "코끼리가 돌진하는 방식이 가장 인상적이었습니다.",
            "The way the elephant charged was most impressive."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "그는 너무 피곤해서 승강장에 있는 의자에 쓰러져 잠이 들었다.",
            "He was so tired that he collapsed in a seat on the platform and fell asleep."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "다음 번 그가 깨어났을 때는 약 12시간이 흘러 있었다.",
            "The next time he woke up, about 12 hours had passed."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "그는 형을 찾기 위해 필사적으로 울부짖으며 오랫동안 기차 안을 뒤졌지만, 찾을 수 없 었다.",
            "He searched the train for a long time crying out for his brother desperately, but he couldn't find him."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "국토를 가로질러 거의 1,000km를 이동한 후에, 그는 Howrah라는, 사람이 많고 빈민가 로 악명이 높은 도시에 도착했다.",
            "After traveling nearly a thousand kilometers across the country, he arrived in Howrah, a city that is populous and notorious for its slums."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "과학자들, 특히 젊은 과학자들은 결과에 너무 집착할 수 있습니다.",
            "Scientists, especially young ones, can get too obsessed with results."
        )
    )
    SentenceTestUnit.sentences.add(
        Sentence(
            "부모들이 아이들에게 양치질을 시키는 것이 쉽지 않습니다.",
            "It's not easy for parents to get their kids to brush their teeth."
        )
    )

    val SentenceTestUnit2 = SentenceTestUnit()
    SentenceTestUnit2.testName = "Sentence Test Unit 2"
    SentenceTestUnit2.sentences.add(
        Sentence(
            "그는 음식과 쉴 곳을 구걸하면서 결국 몇 달 동안 길거리에서 노숙하게 되었다.",
            "He ended up living on the streets for a few months as he begged for food and shelter."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "그는 그의 새로운 집에 정착했고, Brierley라는 새로운 성(ME)을 받았다.",
            "He settled down in his new home and was given a new last name, Brierley."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "그는 인도 지도를 볼 대마다, 저 모든 도시와 마을 사이, 어딘가가 그가 태어났던 장소라 생각하곤 했다.",
            "Every time he looked at a map of India, he would think that somewhere, among all of those cities and towns, was the place where he had been born."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "이러한 기술을 가지고 탐험하는 것은 마치 지구 위를 나는 것과 같았다.",
            "Exploring with these technologies was like flying over the earth."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "그가 기차에 있었던 시간과 그것의 예상되는 속력을 이용해, 그는 Howrah까지 대략 960km를 이동했음이 틀림없다는 것을 알아냈다.",
            "Using the time that he had been on the train and its likely speed, he figured out that he must have traveled about 960 kilometers to Howrah."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "멀리 떠나 대학에서 생활하는 그녀는 누구에게도 보고하지 않고 원할 때마다 외출하는 데 익숙합니다.",
            "Living away at college, she is accustomed to going out whenever she pleases, without having to report to anyone."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "단기간일 것이라고 확신한 남편과 나는 Carol이 새 일자리를 찾는 동안 무료로 우리와 함께 머물 수 있다는 것에 동의했습니다.",
            "Being certain that it would be short-term, my husband and I agreed that Carol could stay with us, free of charge, while she searched for a new job."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "당신이 원하는 직업을 찾는 것은 많은 시간과 노력이 필요합니다.",
            "Finding the job you want takes lots of time and effort."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "하루에 한 시간을 더 추가하는 것은, 특히 당신이 업무 이외의 다른 일을 하는 데 그것 을 사용하는 경우, 스트레스를 완화하는 효과적인 방법입니다.",
            "Adding an extra hour to the day, especially if you use it to do something other than work, is an effective way to relieve stress."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "우리가 그들과 우리는 분리될 수 없다는 것을 알게 되는 것은 바로 그들이 사라지고 우 리가 그들을 결코 볼 수 없을 때 뿐입니다.",
            "It is only when they are gone and we never see them that we find that they and we are indivisible."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "좋은 배우를 드러내는 것은 바로 그들이 말을 하고 있지 않을 때 우리에게 보여줄 수 있 는 것입니다.",
            "It is what they can show us when they are not talking that reveals the fine actor."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "여행객들은 도시의 거리 전역에 고동치는 탱고의 활기찬 리듬을 느낄 수 있다.",
            "Travelers can feel the vigorous rhythm of the tango pulsing throughout the city's streets."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "소규모 기업은 일반적으로 대규모 다국적 기업과 경쟁하는 데 어려움을 겪습니다.",
            "Small companies typically have difficulty competing against large multinationals."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "나이가 들면서, 그는 온라인 지도와 위성 사진을 이용하면서 오랫동안 보지 못한 자신 의 집을 찾기 시작했다.",
            "As he grew older, he started to search for his long-lost home using online maps and satellite imagery."
        )
    )
    SentenceTestUnit2.sentences.add(
        Sentence(
            "Paul은 자신의 인기가 자신의 재능을 개발하고 사람들의 요구 사항을 이해하는 데 더 많은 시간을 보냈기 때문이라고 생각했습니다.",
            "Paul attributed his popularity to spending more time developing his own talents and understanding the needs of the people."
        )
    )

    val SentenceTestUnit3 = SentenceTestUnit()
    SentenceTestUnit3.testName = "Sentence Test Unit 3"
    SentenceTestUnit3.enableEnglishWordHint = false
    SentenceTestUnit3.sentences.add(
        Sentence(
            "하루 휴가를 내려구요.",
            "I'm taking a day off."
        )
    )
    SentenceTestUnit3.sentences.add(
        Sentence(
            "보고서를 엑셀 형식으로 제출해야 합니다.",
            "You are supposed to submit a report in Excel format."
        )
    )
    SentenceTestUnit3.sentences.add(
        Sentence(
            "Mr. Evans와 약속이 있어요.",
            "I have an appointment with Mr. Evans."
        )
    )
    SentenceTestUnit3.sentences.add(
        Sentence(
            "당신 이름이 적힌 검정색 표지판을 들고 있겠습니다.",
            "I'll have a black sign with your name on it."
        )
    )
    SentenceTestUnit3.sentences.add(
        Sentence(
            "연락처 좀 알려주시겠어요?",
            "How can I reach you?"
        )
    )
    SentenceTestUnit3.sentences.add(
        Sentence(
            "지금 아니면 안돼.",
            "It's now or never."
        )
    )
    SentenceTestUnit3.sentences.add(
        Sentence(
            "바르게 행동해.",
            "Behave yourself."
        )
    )
    SentenceTestUnit3.sentences.add(
        Sentence(
            "우린 이 고비를 넘길 거야.",
            "We'll get through this."
        )
    )
    SentenceTestUnit3.sentences.add(
        Sentence(
            "그거 끝냈나요?",
            "Did you get it done?"
        )
    )
    SentenceTestUnit3.sentences.add(
        Sentence(
            "드릴 말씀이 있어요.",
            "I have something to tell you."
        )
    )

    println("ET is ready")


    do {
        print("command: ")
        val userInput: String = readln()
        if (userInput.lowercase() == "exit") {
            break
        } else if (userInput.lowercase().startsWith("go")) {
            val testFileName = userInput.split(" ")[1].strip()
            when (testFileName) {
                "STU1" -> {
                    test(SentenceTestUnit)
                }
                "STU2" -> {
                    test(SentenceTestUnit2)
                }
                "STU3" -> {
                    test(SentenceTestUnit3)
                }
            }
        } else if (userInput.lowercase().startsWith("prac")){
            val pracFileName = userInput.split(" ")[1].strip()
            when (pracFileName) {
                "STU1" -> {
                    prac(SentenceTestUnit)
                }
                "STU2" -> {
                    prac(SentenceTestUnit2)
                }
                "STU3" -> {
                    prac(SentenceTestUnit3)
                }
            }
        }

    } while (true)
}

class ET {
    // ET is standing for "English Test"

}


fun test(SentenceTestUnit: SentenceTestUnit) {
    // pick random 20 sentences but don't repeat
    val randomSentences = mutableListOf<Sentence>()
    var quizNumber = 1

    val incorrectedSentences = mutableListOf<Sentence>()
    while (randomSentences.size < SentenceTestUnit.sentences.size) {
        val randomSentence = SentenceTestUnit.sentences.random()
        if (randomSentences.contains(randomSentence)) {
            continue
        }
        randomSentences.add(randomSentence)

        println("Quiz $quizNumber")
        println("Korean: ${randomSentence.koreanAnswer}")

        if (SentenceTestUnit.enableEnglishWordHint) {
            var preWork = randomSentence.englishAnswer.replace(".", "")
            preWork = preWork.replace(",", "")
            preWork = preWork.replace(";", "")
            preWork = preWork.replace(":", "")
            preWork = preWork.replace("!", "")
            preWork = preWork.replace("?", "")

            preWork = preWork.lowercase()

            val mixEnglishWord: List<String> = preWork.split(" ").shuffled()
            val mixEnglishSentence = mixEnglishWord.joinToString(" / ")
            println("English: $mixEnglishSentence")
        }
        println()
        quizNumber++
        print("Answer: ")
        val userAnswer = readln()
        if (userAnswer == randomSentence.englishAnswer) {
            println("Correct!")
        } else if (userAnswer == "exit"){
            return
        } else {
            println("Incorrect!")
            println("Correct Answer: ${randomSentence.englishAnswer}")
            incorrectedSentences.add(randomSentence)
        }
    }
    println("End of the test")
    println("Incorrected Sentences")
    for (sentence in incorrectedSentences) {
        println("Korean: ${sentence.koreanAnswer}")
        println("English: ${sentence.englishAnswer}")
        println()
    }


}

fun prac(sentenceTestUnit: SentenceTestUnit){
    var quizNumber = 1
    for (sentence in sentenceTestUnit.sentences){
        println("Quiz $quizNumber")
        println("Korean: ${sentence.koreanAnswer}")
        println("English: ${sentence.englishAnswer}")
        println()
        var userAnswer = readln()
        quizNumber++
    }

    println("finished")
}